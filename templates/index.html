<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Defaulter Prediction</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .card-header { background-color: #0d6efd; color: white; }
        .result-box { margin-bottom: 20px; padding: 20px; border-radius: 10px; }
        .high-risk { background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .low-risk { background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    </style>
</head>
<body>

<div class="container py-5">
    <h1 class="text-center mb-4">ðŸ’µ Loan Defaulter Prediction</h1>

    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    {% if result %}
        <div class="result-box text-center {% if result == 'High Risk' %}high-risk{% else %}low-risk{% endif %}">
            <h2>Risk Level: {{ result }}</h2>
            <p class="lead">Probability: <strong>{{ prob }}</strong></p>
            <small>Raw Score: {{ raw }}</small>
        </div>
    {% endif %}

    <form action="/" method="POST">
        
        <div class="card mb-4">
            <div class="card-header">Applicant Information</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h5 class="mb-3 text-secondary">Personal & ID</h5>
                        <div class="mb-3">
                            <label class="form-label">SK_ID_CURR</label>
                            <input type="number" step="1" name="SK_ID_CURR" class="form-control" value="403354" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Age (Years)</label>
                            <input type="number" step="any" name="YEARS_BIRTH" class="form-control" value="62.239562" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Years Employed</label>
                            <input type="number" step="any" name="YEARS_EMPLOYED" class="form-control" value="5.10883" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Years Registration</label>
                            <input type="number" step="any" name="YEARS_REGISTRATION" class="form-control" value="24.454483" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Years ID Publish</label>
                            <input type="number" step="any" name="YEARS_ID_PUBLISH" class="form-control" value="12.755647" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Family Members</label>
                            <input type="number" step="1" name="CNT_FAM_MEMBERS" class="form-control" value="2.0" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Occupation Type</label>
                            <select name="OCCUPATION_TYPE" class="form-select">
                                {% for opt in lists.occupation %}
                                    <option value="{{ opt }}" {% if opt == 'Laborers' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Organization Type</label>
                            <select name="ORGANIZATION_TYPE" class="form-select">
                                {% for opt in lists.organization %}
                                    <option value="{{ opt }}" {% if opt == 'Business Entity Type 3' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Region Pop. Relative</label>
                            <input type="number" step="any" name="REGION_POPULATION_RELATIVE" class="form-control" value="0.035792">
                        </div>
                    </div>

                    <div class="col-md-4">
                        <h5 class="mb-3 text-secondary">Financial & External</h5>
                        <div class="mb-3">
                            <label class="form-label">Total Income</label>
                            <input type="number" step="any" name="AMT_INCOME_TOTAL" class="form-control" value="211500.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Credit Amount</label>
                            <input type="number" step="any" name="AMT_CREDIT" class="form-control" value="883863.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Annuity Amount</label>
                            <input type="number" step="any" name="AMT_ANNUITY" class="form-control" value="25330.5">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Goods Price</label>
                            <input type="number" step="any" name="AMT_GOODS_PRICE" class="form-control" value="737784.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">EXT_SOURCE_2</label>
                            <input type="number" step="any" name="EXT_SOURCE_2" class="form-control" value="0.768663">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">EXT_SOURCE_3</label>
                            <input type="number" step="any" name="EXT_SOURCE_3" class="form-control" value="0.488455">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Car Age</label>
                            <input type="number" step="any" name="OWN_CAR_AGE" class="form-control" value="4.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Years Last Phone Change</label>
                            <input type="number" step="any" name="YEARS_LAST_PHONE_CHANGE" class="form-control" value="0.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Credit Bureau Year Requests</label>
                            <input type="number" step="any" name="AMT_REQ_CREDIT_BUREAU_YEAR" class="form-control" value="2.0">
                        </div>
                    </div>

                    <div class="col-md-4">
                        <h5 class="mb-3 text-secondary">Process & Social</h5>
                        <div class="mb-3">
                            <label class="form-label">Weekday Start</label>
                            <select name="WEEKDAY_APPR_PROCESS_START" class="form-select">
                                {% for opt in lists.weekday %}
                                    <option value="{{ opt }}" {% if opt == 'SATURDAY' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Hour Start</label>
                            <input type="number" step="1" name="HOUR_APPR_PROCESS_START" class="form-control" value="14">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">OBS_30_CNT_SOCIAL</label>
                            <input type="number" step="any" name="OBS_30_CNT_SOCIAL_CIRCLE" class="form-control" value="4.0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">OBS_60_CNT_SOCIAL</label>
                            <input type="number" step="any" name="OBS_60_CNT_SOCIAL_CIRCLE" class="form-control" value="4.0">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">Previous Application History (Aggregated)</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3"><label>Prev Annuity Mean</label><input type="number" step="any" name="PREV_AMT_ANNUITY_MEAN" class="form-control" value="21739.23"></div>
                        <div class="mb-3"><label>Prev Annuity Median</label><input type="number" step="any" name="PREV_AMT_ANNUITY_MEDIAN" class="form-control" value="21739.23"></div>
                        <div class="mb-3"><label>Prev App Mean</label><input type="number" step="any" name="PREV_AMT_APPLICATION_MEAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev App Median</label><input type="number" step="any" name="PREV_AMT_APPLICATION_MEDIAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev Credit Mean</label><input type="number" step="any" name="PREV_AMT_CREDIT_MEAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev Credit Median</label><input type="number" step="any" name="PREV_AMT_CREDIT_MEDIAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev Goods Mean</label><input type="number" step="any" name="PREV_AMT_GOODS_PRICE_MEAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev Goods Median</label><input type="number" step="any" name="PREV_AMT_GOODS_PRICE_MEDIAN" class="form-control" value="0.0"></div>
                        <div class="mb-3"><label>Prev Payment Max</label><input type="number" step="any" name="PREV_CNT_PAYMENT_MAX" class="form-control" value="24.0"></div>
                        <div class="mb-3"><label>Prev Sellerplace Area</label><input type="number" step="any" name="PREV_SELLERPLACE_AREA_MEAN" class="form-control" value="-1.0"></div>
                        <div class="mb-3"><label>Prev SK_ID Count</label><input type="number" step="any" name="PREV_SK_ID_PREV_COUNT" class="form-control" value="1.0"></div>
                        <div class="mb-3"><label>Prev SK_ID Curr First</label><input type="number" step="any" name="PREV_SK_ID_CURR_FIRST" class="form-control" value="403354.0"></div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="mb-3"><label>Prev Years Decision Mean</label><input type="number" step="any" name="PREV_YEARS_DECISION_MEAN" class="form-control" value="0.50924"></div>
                        <div class="mb-3"><label>Prev Years First Due</label><input type="number" step="any" name="PREV_YEARS_FIRST_DUE_MEAN" class="form-control" value="2.220397"></div>
                        <div class="mb-3"><label>Prev Years Last Due</label><input type="number" step="any" name="PREV_YEARS_LAST_DUE_MEAN" class="form-control" value="2.672142"></div>
                        <div class="mb-3"><label>Prev Years Last Due 1st Ver</label><input type="number" step="any" name="PREV_YEARS_LAST_DUE_1ST_VERSION_MEAN" class="form-control" value="1.626283"></div>
                        <div class="mb-3"><label>Prev Years First Draw</label><input type="number" step="any" name="PREV_YEARS_FIRST_DRAWING_MEAN" class="form-control" value="999.980835"></div>
                        <div class="mb-3"><label>Prev Years Termination</label><input type="number" step="any" name="PREV_YEARS_TERMINATION_MEAN" class="form-control" value="2.688569"></div>
                        <div class="mb-3"><label>Prev Hour Mean</label><input type="number" step="any" name="PREV_HOUR_APPR_PROCESS_START_MEAN" class="form-control" value="13.0"></div>
                        <div class="mb-3"><label>Prev Insured Max</label><input type="number" step="any" name="PREV_NFLAG_INSURED_ON_APPROVAL_MAX" class="form-control" value="0.0"></div>

                        <div class="mb-3">
                            <label class="form-label">Prev Prod Comb</label>
                            <select name="PREV_PRODUCT_COMBINATION_LAMBDA" class="form-select">
                                {% for opt in lists.prev_prod %}
                                    <option value="{{ opt }}" {% if opt == 'Cash' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Prev Goods Cat</label>
                            <select name="PREV_NAME_GOODS_CATEGORY_LAMBDA" class="form-select">
                                {% for opt in lists.prev_goods %}
                                    <option value="{{ opt }}" {% if opt == 'XNA' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Prev Weekday</label>
                            <select name="PREV_WEEKDAY_APPR_PROCESS_START_LAMBDA" class="form-select">
                                {% for opt in lists.prev_weekday %}
                                    <option value="{{ opt }}" {% if opt == 'TUESDAY' %}selected{% endif %}>{{ opt }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-grid gap-2 mb-5">
            <button type="submit" class="btn btn-primary btn-lg">Predict Status</button>
        </div>

    </form>
</div>

</body>
</html>
